<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style type="text/css">
 .code,.decode{
            width: 86%;
            height: 220px;
            background: #eee;
            word-break: break-all;
            max-height: 220px;
            overflow-y: auto;
}

.pass, .pass2 {
    width: 50%;
    height: 42px;
    outline: none;
    border-radius: 4px;
    font-size: 1.2em;

}
    </style>
</head>
<body>
      <span class="err"></span>
    <div style="position: relative;width: 50%; border: 1px solid #3333;padding: 5px;display: flex; flex-direction: row;">
     <input type="text" class="pass" placeholder="Enter your password">
     <input type="text" class="pass2" placeholder="signature  e.g 0,1,3,4,2">

    </div>

    <div class="code" contenteditable="true">

    </div>
    <button class="encoder" >ENCODE</button>
    <button class="decoder">DeCODE</button>

    <div class="decode" contenteditable="true">

    </div>
    
</body>
</html>

<script>
    






/**
 * encoder - function that turns a clear text to an encoded text
 * @$input:  array that contains the text to encode ["text tot encode"]
 * @$key: is the password you must not forget
 * @$desembleCode: array of int in any order without  leap [6,3,2,4,1,0,5].
 *  the number must start from zero to anu lenght in order, common difference must be 1
 *  e.g 0,1,2,3,4,5, you can now rearrange in any way you like
 * @return: 
*/
	
function encoder( $input,  $key, $desembleCode = [])
{

   let $key_int_array  = [];
   let  $key_ascii_value_total  = 0;
     $key   = btoa($key);
    for (let $i = 0; $i < $key.length; $i++) {
        $ascii_value = $key.charCodeAt([$i]);
        $key_ascii_value_total +=  $ascii_value;
		$key_int_array.push($ascii_value)
        //array_push($key_int_array, $ascii_value);
    }

      $input  = btoa(JSON.stringify($input));
      let $input_int_array  = [];
    for (let $x = 0; $x < $input.length; $x++) {
       let  $ascii_value = $input.charCodeAt([$x]) + $key_ascii_value_total;
	   $input_int_array.push($ascii_value)
       
    }
 
	  

  let   $output  = btoa(JSON.stringify($input_int_array));


   let  $scattered_chunk_arr = [];
    if ($desembleCode.length>0) {
        let $len  = $desembleCode.length;
        let $cutLen  = Math.ceil($output.length / $len);
        let $cut_start = 0;
        let $cut_end  = $output.length
        let $chunk_arr  = [];
        while ($cut_start < $cut_end) {
           let  $chunk  = $output.substr( $cut_start, $cutLen);
		   $chunk_arr.push($chunk)
           
            $cut_start += $cutLen;
        }
		console.log($chunk_arr)
       let  $scattered_chunk_arr  = [];
        while ($desembleCode.length>0) {
           let  $key  = $desembleCode.shift()// array_shift($desembleCode);

			$scattered_chunk_arr.push($chunk_arr[$key])//.push($chunk_arr[$key])
        }

		//console.log($scattered_chunk_arr)
        return ['encode done', $key_ascii_value_total, btoa(JSON.stringify($scattered_chunk_arr))];
        //  $output  =  base64_encode(json_encode($scattered_chunk_arr));
    }
  
   
}





function decode(encrytedStr_array,key,scatterer){
           
           key  = btoa(key);
           let key_ascii_total_val  = 0;
           for (let index = 0; index < key.length; index++) {
               key_ascii_total_val += key.charCodeAt(index)//calculate the secrete key
           }

           if(parseInt (encrytedStr_array[1]) !== key_ascii_total_val){
               return false  // if the secreate key does not match
           }

           try {
                  
           
           //reorganize the scattered array
           let scattared_array  = atob(encrytedStr_array[2]) 
           scattared_array  = JSON.parse( scattared_array)
           let re_oranize_arr  = []
           let ind = 0;
       // let 	keys  = Object.keys(scatterer);
           let  value  = Object.values(scatterer)
           while(scatterer.length>ind){
               re_oranize_arr[value[ind]] = scattared_array[ind]
               ind++;
           }
       
       
       
        let   $int_array_encryted  = JSON.parse(atob(re_oranize_arr.join("")))
           
                   let $decrypted  = '';
               for (let index_ = 0; index_ < $int_array_encryted .length; index_++) {
                    $decrypted +=   String.fromCharCode($int_array_encryted [index_]-key_ascii_total_val) 
               }
               
               return JSON.parse(atob ($decrypted))[0];
           } catch (error) {
               console.log("ERR DECODING THE CIPHER. MAKE SURE YOU HAVE YOUR SECRTE KEY AND SCATTERER ARRAY")
           }

       }





  let text =   [`

nameship login 
userName = theproli
password  = ?@Babatundetheproli2020/2021?
url   = https://ap.www.namecheap.com/#

proli nameship-server login 
userName = u_879705////u_879705// u_879705
password  = 40HgOUVUOm////fQOvxzHJ8u///q0Iq4oUTrN///r7aSt7NMso

url   = https://vpspanel.web-hosting.com/control.php?_v=a4t274x2v2n2544303a454 ////l 
login url  =    https://vpspanel.web-hosting.com/login.php


chown --preserve-root -R rocks.rocks /home/rocks/public_html/{*,.[!.]*}
`] 



let validate  = ()=>{


    let pass;
    let sig;

    try {
        pass  = document.querySelector(".pass").value

        sig  = document.querySelector(".pass2").value.split(",")
         sig_len = sig.length;
         let start = 0;
         let sig_arr  = [];
         while (start != sig_len){
                sig_arr.push(parseInt(sig[start]))
            start++
         }
        return [pass, sig_arr]
    } catch (error) {
        document.querySelector(".err").innerText  = error
        console.log(error)
        return (false)
        
    }

}



document.querySelector(".encoder").addEventListener('click',function(){
    let text2  =  document.querySelector(".code").innerText
    let  [pass,sig]  = validate()
    document.querySelector(".decode").innerText  =   encoder([text2],pass,sig)
})


document.querySelector(".decoder").addEventListener('click',function(){
   let text =  document.querySelector(".code").innerText 
    text  =  text.split(",")
  
   let  [pass,sig]  = validate()
   console.log(text,pass,sig)

   let dec = decode(text, pass, sig)

   document.querySelector(".decode").innerText  = dec
})
</script>

